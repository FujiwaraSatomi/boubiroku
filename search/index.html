<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ただの忘備録</title>
  <link rel="stylesheet" href="../assets/css/document.css">
  <link rel="stylesheet" href="../assets/css/nav.css">
  <link rel="stylesheet" href="../assets/css/article.css">
  <link rel="stylesheet" href="../assets/css/markdown.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.1.2/css/all.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="../pageaction.js"></script>
  <script>
    param = (() => {
      if (1 < document.location.search.length) {
        var query = document.location.search.substring(1);
        var parameters = query.split('&');
        var result = new Object();
        for (var i = 0; i < parameters.length; i++) {
          var element = parameters[i].split('=');
          var paramName = decodeURIComponent(element[0]);
          var paramValue = decodeURIComponent(element[1]);
          result[paramName] = decodeURIComponent(paramValue);
        }
        return result;
      }
      return null;
    })();
  </script>
</head>
<body>
  <nav>
    <span><a href="../">
      <span class="logo-1">た</span>
      <span class="logo-2">だ</span>
      <span class="logo-3">の</span>
      <span class="logo-4">忘</span>
      <span class="logo-5">備</span>
      <span class="logo-6">録</span>
    </a></span>
    <div class="margin-left-auto">
      <input type="text" placeholder="検索...">
      <a href="../tags/">タグ一覧</a>
      <a href="https://github.com/yuzupon1133/boubiroku/issues">ご意見・ご要望</a>
      <!-- <a href="../create/" class="create">記事作成 <i class="fa-solid fa-pen"></i></a> -->
    </div>
  </nav>
  <div class="main" style="display: flex;">
    <div class="main-article">
      <h1 id="article-title">検索中です...</h1>
      <div class="article-tag" id="article-tagicon" style="display: none">
        <i class="fa-solid fa-tag"></i>&nbsp;<span id="article-tag"></span>&nbsp;
        <i class="fa-solid fa-calendar"></i>&nbsp;<span id="article-date"></span>&nbsp;
        <i class="fa-solid fa-calendar-lines-pen"></i>&nbsp;<span id="article-edit"></span>
      </div>
      <div id="article"></div>
    </div>
  </div>

  <footer>
    <hr>
    <center>created at 2022/06/30 @ yuzupon1133</center>
  </footer>

  <script>
    document.addEventListener("scroll", () => {
      var nav = document.getElementsByTagName("nav")[0];
      if(window.scrollY <= 10) {
        nav.classList.remove("onscroll");
      } else {
        nav.classList.add("onscroll");
      }
    });
    const unix2date = (unix) => {
      var datetemp = new Date(unix * 1000);
      datetemp.setHours(datetemp.getHours() + (new Date()).getTimezoneOffset() / -60)
      return datetemp.toISOString().replace(/([0-9\-]+)T([0-9:]+)\..+/, "$1 $2");
    }
    if(param["q"]) {
      param["q"] = param["q"].replace("+", "");
      fetch("../assets/article_list.json")
      .then(res => res.json())
      .then(res => {
        document.title = param["q"] + "の検索結果 | ただの忘備録";
      })
      .catch(e => {
        document.getElementById("article-title").innerHTML = "エラーが発生しました。";
        document.getElementById("article").innerHTML = "";
        document.getElementById("article-tagicon").style.display = "none";
        document.title = "エラーが発生しました | ただの忘備録";
      });
    }
  </script>
</body>
</html>
