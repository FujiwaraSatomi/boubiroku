<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>ただの忘備録</title>
  <link rel="stylesheet" href="/boubiroku/assets/css/document.css">
  <link rel="stylesheet" href="/boubiroku/assets/css/nav.css">
  <link rel="stylesheet" href="/boubiroku/assets/css/article.css">
  <link rel="stylesheet" href="/boubiroku/assets/css/markdown.css">
  <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.1.2/css/all.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="./pageaction.js"></script>
</head>
<body>
  <nav><script src="/boubiroku/nav.js"></script></nav>
  <div class="main" style="display: flex; justify-content: center;">
    <div class="main-article">
      <h1 id="article-title">記事を読み込み中です...</h1>
      <div class="article-tag" id="article-tagicon" style="display: none">
        <i class="fa-solid fa-tag"></i>&nbsp;<a id="article-tag" href></a>&nbsp;
        <i class="fa-solid fa-calendar"></i>&nbsp;<span id="article-date"></span>&nbsp;
        <i class="fa-solid fa-calendar-lines-pen"></i>&nbsp;<span id="article-edit"></span>
      </div>
      <div id="article"></div>
    </div>
  </div>

  <footer>
    <hr>
    <center>created at 2022/06/30 @ yuzupon1133</center>
  </footer>

  <script>
    let locate_match = location.href.match(/^https:\/\/yuzupon1133\.github\.io\/boubiroku\/article\/(\d+)(?:[?#][^\/]*)?$/);
    if(locate_match) {
      fetch("./assets/article/" + locate_match[1] + ".json")
      .then(res => res.json())
      .then(res => {
        document.getElementById("article").innerHTML = marked.parse(res.raw);
        document.getElementById("article-title").innerHTML = res.title;
        document.getElementById("article-tag").innerHTML = res.tag;
        document.getElementById("article-tag").href = "../search/?q=tag%3A" + EncodeURIComponent(res.tag);
        document.getElementById("article-tagicon").style.display = "block";
        document.getElementById("article-date").innerHTML = unix2date(res.createtime).replace(/([0-9\-]+) .+/, "$1");
        document.getElementById("article-date").setAttribute("title", unix2date(res.createtime));
        document.getElementById("article-edit").innerHTML = unix2date(res.edittime).replace(/([0-9\-]+) .+/, "$1");
        document.getElementById("article-edit").setAttribute("title", unix2date(res.edittime));
        document.title = res.title + " | ただの忘備録";
      })
      .catch(e => {
        document.getElementById("article-title").innerHTML = "お探しのページは見つかりませんでした。";
        document.getElementById("article").innerHTML = "";
        document.getElementById("article-tagicon").style.display = "none";
        document.title = "ページが見つかりません | ただの忘備録";
      });
    } else {
      document.getElementById("article-title").innerHTML = "お探しのページは見つかりませんでした。";
      document.getElementById("article").innerHTML = "";
      document.getElementById("article-tagicon").style.display = "none";
      document.title = "ページが見つかりません | ただの忘備録";
    }
  </script>
</body>
</html>
